<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <!-- Dashboard Form View -->
        <record id="ks_dashboard_ninja.board_form" model="ir.ui.view">
            <field name="name">ks_dashboard_ninja.board.form</field>
            <field name="model">ks_dashboard_ninja.board</field>
            <field name="arch" type="xml">
                <form string="Dashboards">
                    <sheet>
                        <group>
                            <group>
                                <field name="ks_dashboard_state" invisible="1"/>
                                <field name="name" readonly="('ks_dashboard_state','=','Locked')"/>
                                <field name="ks_dashboard_menu_name"
                                       required="('ks_dashboard_state','!=','Locked')"
                                       readonly="('ks_dashboard_state','=','Locked')"/>
                                <field name="ks_set_interval"/>
                            </group>
                            <group>
                                <!-- Default template is hidden in form, managed elsewhere -->
                                <field name="ks_dashboard_top_menu_id"
                                       options="{'no_create': True, 'no_create_edit': True, 'no_open': True}"
                                       required="('ks_dashboard_state','!=','Locked')"
                                       readonly="('ks_dashboard_state','=','Locked')"/>
                                <field name="ks_dashboard_menu_sequence"/>
                                <field name="ks_dashboard_active" readonly="('ks_dashboard_state','=','Locked')"/>
                            </group>
                        </group>

                        <notebook>
                            <page name="pre_defined_filters" string="Pre Defined Filters">
                                <field name="ks_dashboard_defined_filters_ids" widget="section_and_note_one2many">
                                    <list>
                                        <control>
                                            <create string="Add Filter"/>
                                            <create string="Add Section"
                                                    context="{'default_display_type': 'line_section'}"/>
                                        </control>
                                        <field name="sequence" widget="handle"/>
                                        <field name="display_type" invisible="1"/>
                                        <field name="id" invisible="1"/>
                                        <field name="ks_model_name" invisible="1"/>
                                        <field name="name"/>
                                        <field name="ks_model_id"/>
                                        <field name="ks_domain"/>
                                        <field name="ks_is_active"/>
                                    </list>
                                </field>
                            </page>

                            <page name="custom_defined_filters" string="Custom Filters">
                                <field name="ks_dashboard_custom_filters_ids">
                                    <list editable="bottom">
                                        <field name="name" required="1"/>
                                        <field name="ks_model_id" required="1"/>
                                        <field name="ks_domain_field_id" required="1"/>
                                    </list>
                                </field>
                            </page>

                            <page name="advance_setting" string="Advance Settings">
                                <group>
                                    <group>
                                        <field name="multi_layouts"/>
                                        <field name="ks_dashboard_group_access" widget="many2many_tags"/>
                                    </group>
                                    <group>
                                        <field name="ks_date_filter_selection" required="1"/>
                                        <field name="ks_dashboard_start_date"
                                               required="('ks_date_filter_selection','=','l_custom')"
                                               readonly="('ks_date_filter_selection','!=','l_custom')"/>
                                        <field name="ks_dashboard_end_date"
                                               required="('ks_date_filter_selection','=','l_custom')"
                                               readonly="('ks_date_filter_selection','!=','l_custom')"/>
                                    </group>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Dashboard Tree/List View -->
        <record id="ks_dashboard_ninja.board_tree" model="ir.ui.view">
            <field name="name">ks_dashboard_ninja.board.list</field>
            <field name="model">ks_dashboard_ninja.board</field>
            <field name="arch" type="xml">
                <list import="0" string="My Dashboard">
                    <field name="ks_dashboard_state" invisible="1"/>
                    <field name="id" invisible="1"/>
                    <field name="name"/>
                    <field name="ks_dashboard_menu_name" required="('ks_dashboard_state','!=','Locked')"/>
                    <field name="ks_dashboard_menu_sequence"/>
                    <field name="ks_dashboard_top_menu_id"
                           options="{'no_create': True, 'no_create_edit': True, 'no_open': True}"
                           required="('ks_dashboard_state','!=','Locked')"
                           readonly="('ks_dashboard_state','=','Locked')"/>
                    <field name="ks_dashboard_active" readonly="('ks_dashboard_state','=','Locked')"/>
                    <field name="ks_dashboard_default_template"
                           required="('id','&lt;', 1)"
                           readonly="('id','>', 0)"
                           options="{'no_create': True, 'no_create_edit': True, 'no_open': True}"/>
                    <field name="ks_set_interval"/>
                    <field name="ks_date_filter_selection" required="1"/>
                    <field name="ks_dashboard_start_date"
                           required="('ks_date_filter_selection','=','l_custom')"
                           readonly="('ks_date_filter_selection','!=','l_custom')"/>
                    <field name="ks_dashboard_end_date"
                           required="('ks_date_filter_selection','=','l_custom')"
                           readonly="('ks_date_filter_selection','!=','l_custom')"/>
                    <field name="ks_dashboard_group_access" widget="many2many_tags"/>
                    <button name="ks_view_items_view" string="View Items" type="object" class="btn-primary"/>
                </list>
            </field>
        </record>

        <!-- Dashboard Template Form -->
        <record id="ks_dashboard_ninja.board_template_form" model="ir.ui.view">
            <field name="name">ks_dashboard_ninja.board.template.form</field>
            <field name="model">ks_dashboard_ninja.board_template</field>
            <field name="arch" type="xml">
                <form string="Dashboard Template">
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                            </group>
                            <group>
                                <field name="ks_template_type" readonly="1"/>
                                <field name="ks_dashboard_board_id" required="('ks_template_type','=', 'custom')" invisible="('ks_template_type','=', 'custom')"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Predefined Filter Form -->
        <record id="ks_dashboard_ninja.board_defined_filters_2" model="ir.ui.view">
            <field name="name">ks_dashboard_ninja.board_defined_filters.form</field>
            <field name="model">ks_dashboard_ninja.board_defined_filters</field>
            <field name="arch" type="xml">
                <form string="Pre Defined Filters">
                    <sheet>
                        <group>
                            <group string="Filter">
                                <label for="ks_model_id" required="('display_type','!=','line_section')" invisible="('display_type','=','line_section')"/>
                                <div class="o_row" required="('display_type','!=','line_section')" invisible="('display_type','=','line_section')">
                                    <field name="ks_model_id"/>
                                    <field name="ks_model_name" invisible="1"/>
                                </div>
                                <label for="name" required="('display_type','!=','line_section')" invisible="('display_type','=','line_section')"/>
                                <div class="o_row" required="('display_type','!=','line_section')" invisible="('display_type','=','line_section')">
                                    <field name="name"/>
                                </div>
                                <label for="ks_domain" required="('display_type','!=','line_section')" invisible="('display_type','=','line_section')"/>
                                <div class="o_row" required="('display_type','!=','line_section')" invisible="('display_type','=','line_section')">
                                    <field name="ks_domain_temp" placeholder="[('field','=','value')]"/>
                                    <field name="ks_domain" widget="domain"/>
                                </div>
                            </group>
                            <group string="Properties">
                                <field name="ks_is_active" invisible="('display_type','=','line_section')"/>
                                <field name="display_type" invisible="1"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Dashboard Template List -->
        <record id="ks_dashboard_ninja.board_template_tree" model="ir.ui.view">
            <field name="name">ks_dashboard_ninja.board.template.list</field>
            <field name="model">ks_dashboard_ninja.board_template</field>
            <field name="arch" type="xml">
                <list string="Dashboard Template">
                    <field name="name"/>
                    <field name="ks_template_type" readonly="1"/>
                    <field name="ks_dashboard_board_id" required="('ks_template_type','=', 'custom')" invisible="('ks_template_type','=', 'custom')"/>
                </list>
            </field>
        </record>

        <!-- Child Boards List -->
        <record id="ks_dashboard_ninja.ks_child_board_tree" model="ir.ui.view">
            <field name="name">ks_dashboard_ninja.ks_child_board.list</field>
            <field name="model">ks_dashboard_ninja.ks_child_board</field>
            <field name="arch" type="xml">
                <list string="Child Boards" editable="top" create="0">
                    <field name="ks_child_menu_id"/>
                    <field name="ks_is_active"/>
                </list>
            </field>
        </record>

        <!-- Actions -->
        <record id="ks_dashboard_ninja.board_action" model="ir.actions.act_window">
            <field name="name">Dashboards</field>
            <field name="res_model">ks_dashboard_ninja.board</field>
            <field name="view_mode">list,form</field>
        </record>

        <record id="ks_dashboard_ninja.board_template_action" model="ir.actions.act_window">
            <field name="name">Dashboard Template</field>
            <field name="res_model">ks_dashboard_ninja.board_template</field>
            <field name="view_mode">list,form</field>
        </record>

        <record id="ks_dashboard_ninja.board_defined_filters_action" model="ir.actions.act_window">
            <field name="name">Pre Defined Filters</field>
            <field name="res_model">ks_dashboard_ninja.board_defined_filters</field>
            <field name="view_mode">list,form</field>
        </record>

        <!-- Menus -->
        <menuitem id="ks_dashboard_ninja_root_menu" name="Dashboard Ninja" sequence="10"/>

        <menuitem id="ks_dashboard_ninja.board_menu" name="Manage Dashboard"
                  parent="ks_dashboard_ninja_root_menu" action="ks_dashboard_ninja.board_action" sequence="20"/>

        <menuitem id="ks_dashboard_ninja.board_defined_filters_menu" name="Pre Defined Filters"
                  parent="ks_dashboard_ninja_root_menu" action="ks_dashboard_ninja.board_defined_filters_action" sequence="30"/>

        <menuitem id="ks_dashboard_ninja.board_template_menu" name="Dashboard Template"
                  parent="ks_dashboard_ninja_root_menu" action="ks_dashboard_ninja.board_template_action" sequence="40"/>

    </data>
</odoo>