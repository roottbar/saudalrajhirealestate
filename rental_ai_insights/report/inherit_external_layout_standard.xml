<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Guard company_registry access in the standard external layout -->
        <template id="inherit_external_layout_standard" inherit_id="web.external_layout_standard">
            <xpath expr="//span[@t-field='company.company_registry']" position="replace">
                <t t-if="'company_registry' in company._fields and company.company_registry">
                    <span t-esc="company.company_registry"/>
                </t>
            </xpath>
            <xpath expr="//span[@t-field='company.foreign_name']" position="replace">
                <t t-if="'foreign_name' in company._fields and company.foreign_name">
                    <span t-esc="company.foreign_name"/>
                </t>
            </xpath>
            <!-- Guard access to o.company_id.country_id.vat_label when o is None -->
            <xpath expr="//span[t[@t-esc=\"o.company_id.country_id.vat_label or 'Tax ID'\"]]" position="replace">
                <span t-esc="(o and o.company_id and o.company_id.country_id and o.company_id.country_id.vat_label) or 'Tax ID'"/>
            </xpath>
        </template>
    </data>
</odoo>
