<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- أولاً: حذف الـ view القديم إذا كان موجوداً -->
    <function model="ir.ui.view" name="unlink" eval="[['&amp;', ('name', '=', 'view.res.partner.google_map'), ('model', '=', 'res.partner')]]"/>
    
    <!-- ثانياً: إنشاء الـ view الجديد من نوع tree -->
    <record id="view_res_partner_google_map" model="ir.ui.view">
        <field name="name">view.res.partner.google_map</field>
        <field name="model">res.partner</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree>
                <field name="id"/>
                <field name="partner_latitude"/>
                <field name="partner_longitude"/>
                <field name="color"/>
                <field name="display_name"/>
                <field name="title"/>
                <field name="email"/>
                <field name="parent_id"/>
                <field name="is_company"/>
                <field name="function"/>
                <field name="phone"/>
                <field name="street"/>
                <field name="street2"/>
                <field name="zip"/>
                <field name="city"/>
                <field name="country_id"/>
                <field name="mobile"/>
                <field name="state_id"/>
                <field name="category_id"/>
                <field name="image_128"/>
                <field name="type"/>
                <field name="company_type"/>
                <field name="contact_address"/>
            </tree>
        </field>
    </record>

    <!-- ثالثاً: تحديث action لإزالة google_map من view_mode -->
    <function model="ir.actions.act_window" name="write" eval="[[ref('base.action_partner_form')], {'view_mode': 'kanban,tree,form'}]"/>
    
    <!-- رابعاً: حذف أي سجلات action view تشير إلى google_map -->
    <delete model="ir.actions.act_window.view" search="[('view_mode', '=', 'google_map'), ('act_window_id', '=', ref('base.action_partner_form'))]"/>
</odoo>
