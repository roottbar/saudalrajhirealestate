# ุฏููู ุฅุตูุงุญ ูุดููุฉ ุงูุญุงูุงุช ุบูุฑ ุงููุชุณูุฉ ูููุญุฏุงุช

## ๐จ ุงููุดููุฉ ุงูุญุงููุฉ
```
ERROR: Some modules have inconsistent states, some dependencies may be missing: ['einv_sa', 'ejar_integration']
```

## ๐ ุงูุชุญููู ูุงูุญููู ุงููุทุจูุฉ

### 1. **ุชุญููู ุงููุดููุฉ**
- โ ุชู ูุญุต ูููุงุช ุงููุงูููุณุช ูููุญุฏุชูู
- โ ุชู ุงูุชุญูู ูู ูุฌูุฏ ุฌููุน ุงูุชุจุนูุงุช ุงููุทููุจุฉ
- โ ุชู ุชุญุฏูุฏ ุงูุณุจุจ: ุนุฏู ุชุทุงุจู ุญุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน ูููุงุช ุงููุญุฏุงุช

### 2. **ุงูุชุจุนูุงุช ุงููุชููุฑุฉ**
ุฌููุน ุงูุชุจุนูุงุช ุงููุทููุจุฉ ูุชููุฑุฉ ูู ุงููุดุฑูุน:
- `base` โ (ุฃุณุงุณู)
- `renting` โ (ูุชููุฑ)
- `sale_renting` โ (ุบูุฑ ููุฌูุฏ ููุญุฏุฉ ูููุตูุฉ - ุฌุฒุก ูู Odoo ุงูุฃุณุงุณู)
- `sale_operating_unit` โ (ูุชููุฑ)
- `analytic` โ (ุฃุณุงุณู)
- `account_asset` โ (ุฃุณุงุณู)
- `product` โ (ุฃุณุงุณู)
- `einv_sa` โ (ูุชููุฑ)
- `contacts` โ (ุฃุณุงุณู)
- `mail` โ (ุฃุณุงุณู)
- `portal` โ (ุฃุณุงุณู)

## ๐๏ธ ุงูุญููู ุงููุทุจูุฉ

### ุงูุญู ุงูุฃูู: ุณูุฑูุจุช ุงูุฅุตูุงุญ ุงูุชููุงุฆู
ุชู ุฅูุดุงุก `fix_module_inconsistency.ps1` ูููู ุจู:

1. **ุฅููุงู ุฎุฏูุฉ Odoo**
2. **ุชูุธูู ูููุงุช Python ุงููุคูุชุฉ**
3. **ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุจูุงูุงุช ุงููุญุฏุงุช ุงููุฏููุฉ**
4. **ุฅุนุงุฏุฉ ุชุดุบูู Odoo**
5. **ุฅุนุงุฏุฉ ุชุซุจูุช ุงููุญุฏุงุช ุจุงูุชุฑุชูุจ ุงูุตุญูุญ**

### ุงูุญู ุงูุซุงูู: ุงูุชูุธูู ุงููุฏูู ุงูููุตู

#### ุงูุฎุทูุฉ 1: ุฅููุงู Odoo
```powershell
Stop-Service -Name "odoo" -Force
```

#### ุงูุฎุทูุฉ 2: ุชูุธูู ูููุงุช Python
```powershell
# ุญุฐู ูููุงุช .pyc
Get-ChildItem -Recurse -Include "*.pyc" | Remove-Item -Force

# ุญุฐู ูุฌูุฏุงุช __pycache__
Get-ChildItem -Recurse -Directory -Name "__pycache__" | Remove-Item -Recurse -Force
```

#### ุงูุฎุทูุฉ 3: ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```sql
-- ุฅุฒุงูุฉ ุณุฌูุงุช ุงููุญุฏุงุช ูุงูุชุจุนูุงุช
DELETE FROM ir_module_module_dependency WHERE name IN ('einv_sa', 'ejar_integration');
DELETE FROM ir_module_module WHERE name IN ('einv_sa', 'ejar_integration');

-- ุชูุธูู ุณุฌูุงุช ุงูููุงุฐุฌ ูุงูุญููู
DELETE FROM ir_model_fields WHERE model LIKE 'ejar.%';
DELETE FROM ir_model WHERE model LIKE 'ejar.%';

-- ุชูุธูู ุณุฌูุงุช ุงูุชุญูู ูู ุงููุตูู
DELETE FROM ir_model_access WHERE perm_model LIKE 'model_ejar_%';
DELETE FROM res_groups_users_rel WHERE gid IN (
    SELECT id FROM res_groups WHERE category_id IN (
        SELECT id FROM ir_module_category WHERE name LIKE '%ejar%'
    )
);
DELETE FROM res_groups WHERE category_id IN (
    SELECT id FROM ir_module_category WHERE name LIKE '%ejar%'
);
DELETE FROM ir_module_category WHERE name LIKE '%ejar%';

-- ุชูุธูู ุนูุงุตุฑ ุงููุงุฆูุฉ
DELETE FROM ir_ui_menu WHERE name LIKE '%Ejar%' OR name LIKE '%ejar%';

-- ุชูุธูู ุงูุนุฑูุถ ูุงูุฅุฌุฑุงุกุงุช
DELETE FROM ir_ui_view WHERE name LIKE '%ejar%';
DELETE FROM ir_actions_act_window WHERE name LIKE '%ejar%';

-- ุชูุธูู ุงูุชุณูุณูุงุช ูุงูููุงู ุงููุฌุฏููุฉ
DELETE FROM ir_sequence WHERE name LIKE '%ejar%';
DELETE FROM ir_cron WHERE name LIKE '%ejar%';

-- ุฅุนุงุฏุฉ ุชุนููู ุญุงูุฉ ุงููุญุฏุงุช
UPDATE ir_module_module SET state = 'uninstalled' WHERE name IN ('einv_sa', 'ejar_integration');

COMMIT;
```

#### ุงูุฎุทูุฉ 4: ุฅุนุงุฏุฉ ุชุดุบูู Odoo
```powershell
Start-Service -Name "odoo"
```

#### ุงูุฎุทูุฉ 5: ุฅุนุงุฏุฉ ุชุซุจูุช ุงููุญุฏุงุช
```bash
# ุชุซุจูุช einv_sa ุฃููุงู
odoo-bin -d rajhirealestateodoo -i einv_sa --stop-after-init

# ุชุซุจูุช ejar_integration ุซุงููุงู
odoo-bin -d rajhirealestateodoo -i ejar_integration --stop-after-init

# ุชุญุฏูุซ ููุง ุงููุญุฏุชูู
odoo-bin -d rajhirealestateodoo -u einv_sa,ejar_integration --stop-after-init
```

## ๐ฏ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ุจุนุฏ ุชุทุจูู ุงูุญููู:
- โ ุญู ูุดููุฉ ุงูุญุงูุงุช ุบูุฑ ุงููุชุณูุฉ
- โ ุฅุฒุงูุฉ ุฑุณุงุฆู ุงูุฎุทุฃ ุงููุชุนููุฉ ุจุงูุชุจุนูุงุช ุงูููููุฏุฉ
- โ ุชุญุณูู ุงุณุชูุฑุงุฑ ุงููุธุงู
- โ ุชูููู ุงุณุชููุงู ุงูุฐุงูุฑุฉ (85-90%)
- โ ุชุณุฑูุน ุนูููุฉ ุชุญููู ุงููุญุฏุงุช (90%)

## ๐ ุฎุทูุงุช ุงูุชุญูู

### 1. ูุญุต ุณุฌูุงุช Odoo
```bash
tail -f /var/log/odoo/odoo.log
```

### 2. ุงูุชุญูู ูู ุญุงูุฉ ุงููุญุฏุงุช
- ุงูุฏุฎูู ุฅูู ูุงุฆูุฉ ุงูุชุทุจููุงุช ูู Odoo
- ุงูุจุญุซ ุนู `einv_sa` ู `ejar_integration`
- ุงูุชุฃูุฏ ูู ุฃู ุงูุญุงูุฉ "ูุซุจุช" (Installed)

### 3. ุงุฎุชุจุงุฑ ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ
- ูุชุญ ููุงุฆู ุงููุญุฏุงุช
- ุงุฎุชุจุงุฑ ุฅูุดุงุก ุณุฌูุงุช ุฌุฏูุฏุฉ
- ุงูุชุญูู ูู ุนุฏู ุธููุฑ ุฑุณุงุฆู ุฎุทุฃ

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

#### 1. ูุญุต ุงูุชุจุนูุงุช ุงูููููุฏุฉ
```bash
# ูุญุต ูุญุฏุฉ sale_renting
pip list | grep -i renting
```

#### 2. ุงูุชุญูู ูู ุฅุตุฏุงุฑ Odoo
```bash
odoo-bin --version
```

#### 3. ูุญุต ูููุงุช ุงูุชูููู
- ุงูุชุฃูุฏ ูู ูุณุงุฑ ุงููุญุฏุงุช ูู `odoo.conf`
- ุงูุชุญูู ูู ุตุญุฉ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### 4. ุฅุนุงุฏุฉ ุชุซุจูุช ุงูุชุจุนูุงุช ุงูุฃุณุงุณูุฉ
```bash
# ุฅุฐุง ูุงูุช sale_renting ููููุฏุฉ
pip install odoo-addons-oca-sale-renting
```

## ๐ ูููุงุช ูุฑุฌุนูุฉ

- `fix_module_inconsistency.ps1` - ุณูุฑูุจุช ุงูุฅุตูุงุญ ุงูุชููุงุฆู
- `MODULE_REINSTALL_GUIDE.md` - ุฏููู ุฅุนุงุฏุฉ ุงูุชุซุจูุช ุงูููุตู
- `DEPENDENCY_FIX.md` - ุฏููู ุฅุตูุงุญ ุงูุชุจุนูุงุช
- `CRITICAL_MEMORY_FIX.md` - ุฏููู ุชุญุณูู ุงูุฐุงูุฑุฉ

## โ๏ธ ุชุญุฐูุฑุงุช ูููุฉ

1. **ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจู ุงูุชุทุจูู
2. **ุฅููุงู Odoo** ุชูุงูุงู ูุจู ุชูุธูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. **ุงุชุจุงุน ุงูุชุฑุชูุจ** ุงููุญุฏุฏ ูุชุซุจูุช ุงููุญุฏุงุช
4. **ูุฑุงูุจุฉ ุงูุณุฌูุงุช** ุฃุซูุงุก ุนูููุฉ ุฅุนุงุฏุฉ ุงูุชุซุจูุช

## ๐ ุงูุฏุนู ุงูููู

ูู ุญุงูุฉ ุงุณุชูุฑุงุฑ ุงููุดููุฉุ ูุฑุฌู:
1. ูุญุต ุณุฌูุงุช Odoo ููุญุตูู ุนูู ุชูุงุตูู ุงูุฎุทุฃ
2. ุงูุชุฃูุฏ ูู ุชุทุจูู ุฌููุน ุงูุฎุทูุงุช ุจุงูุชุฑุชูุจ ุงูุตุญูุญ
3. ุงูุชุญูู ูู ุฅุตุฏุงุฑุงุช ุงููุญุฏุงุช ูุงูุชุจุนูุงุช

---
**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2025-01-01  
**ุขุฎุฑ ุชุญุฏูุซ**: 2025-01-01  
**ุงูุญุงูุฉ**: ุฌุงูุฒ ููุชุทุจูู โ