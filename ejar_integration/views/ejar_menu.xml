<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Main Ejar Menu -->
    <menuitem id="menu_ejar_main" name="Ejar Integration" sequence="50" web_icon="ejar_integration,static/description/icon.png"/>
    
    <!-- Configuration Menu -->
    <menuitem id="menu_ejar_configuration" name="Configuration" parent="menu_ejar_main" sequence="100"/>
    
    <!-- Settings Action -->
    <record id="action_ejar_settings" model="ir.actions.act_window">
        <field name="name">Ejar Settings</field>
        <field name="res_model">res.config.settings</field>
        <field name="view_mode">form</field>
        <field name="target">inline</field>
        <field name="context">{'module': 'ejar_integration'}</field>
    </record>
    
    <!-- API Configuration Action -->
    <record id="action_ejar_api_config" model="ir.actions.act_window">
        <field name="name">API Configuration</field>
        <field name="res_model">ejar.api.config</field>
        <field name="view_mode">list,form</field>
        <field name="context">{}</field>
    </record>
    
    <!-- Webhook Configuration Action -->
    <record id="action_ejar_webhook_config" model="ir.actions.act_window">
        <field name="name">Webhook Configuration</field>
        <field name="res_model">ejar.webhook.config</field>
        <field name="view_mode">list,form</field>
        <field name="context">{}</field>
    </record>
    
    <!-- Notification Templates Action -->
    <record id="action_ejar_notification_template" model="ir.actions.act_window">
        <field name="name">Notification Templates</field>
        <field name="res_model">ejar.notification.template</field>
        <field name="view_mode">list,form</field>
        <field name="context">{}</field>
    </record>
    
    <!-- Configuration Menu Items -->
    <menuitem id="menu_ejar_settings" name="Settings" parent="menu_ejar_configuration" 
              action="action_ejar_settings" sequence="10"/>
    <menuitem id="menu_ejar_api_config" name="API Configuration" parent="menu_ejar_configuration" 
              action="action_ejar_api_config" sequence="20"/>
    <menuitem id="menu_ejar_webhook_config" name="Webhook Configuration" parent="menu_ejar_configuration" 
              action="action_ejar_webhook_config" sequence="30"/>
    <menuitem id="menu_ejar_notification_template" name="Notification Templates" parent="menu_ejar_configuration" 
              action="action_ejar_notification_template" sequence="40"/>
    
    <!-- Tools Menu -->
    <menuitem id="menu_ejar_tools" name="Tools" parent="menu_ejar_main" sequence="95"/>
    
    <!-- Bulk Sync Action -->
    <record id="action_ejar_bulk_sync" model="ir.actions.server">
        <field name="name">Bulk Sync to Ejar</field>
        <field name="model_id" ref="model_ejar_property"/>
        <field name="state">code</field>
        <field name="code">
            action = env['ejar.sync.helpers'].bulk_sync_records(env.context.get('active_model'), env.context.get('active_ids', []))
        </field>
    </record>
    
    <!-- Data Import Action -->
    <record id="action_ejar_data_import" model="ir.actions.act_window">
        <field name="name">Data Import</field>
        <field name="res_model">ejar.data.import</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="context">{}</field>
    </record>
    
    <!-- Data Export Action -->
    <record id="action_ejar_data_export" model="ir.actions.act_window">
        <field name="name">Data Export</field>
        <field name="res_model">ejar.data.export</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="context">{}</field>
    </record>
    
    <!-- System Health Check Action -->
    <record id="action_ejar_health_check" model="ir.actions.server">
        <field name="name">System Health Check</field>
        <field name="model_id" ref="model_ejar_sync_log"/>
        <field name="state">code</field>
        <field name="code">
            action = env['ejar.api.controller'].health_check()
        </field>
    </record>
    
    <!-- Tools Menu Items -->
    <menuitem id="menu_ejar_bulk_sync" name="Bulk Sync" parent="menu_ejar_tools" 
              action="action_ejar_bulk_sync" sequence="10"/>
    <menuitem id="menu_ejar_data_import" name="Data Import" parent="menu_ejar_tools" 
              action="action_ejar_data_import" sequence="20"/>
    <menuitem id="menu_ejar_data_export" name="Data Export" parent="menu_ejar_tools" 
              action="action_ejar_data_export" sequence="30"/>
    <menuitem id="menu_ejar_health_check" name="Health Check" parent="menu_ejar_tools" 
              action="action_ejar_health_check" sequence="40"/>
</odoo>
