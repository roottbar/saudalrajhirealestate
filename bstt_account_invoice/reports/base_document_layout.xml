<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- ======= External Layout Standard ======= -->
        <template id="external_layout_standard" inherit_id="web.external_layout_standard">
            <!-- Footer -->
            <xpath expr="//div[contains(@class,'o_standard_footer')]" position="replace">
                <div class="text-center" style="font-size: small;border-top: 1px solid black;">
                    <ul class="list-inline mb4">
                        <li>
                            <span class="o_force_rtl">س.ت 1010076127 - ص.ب 4630 الرياض 11412 - تليفون: 4566883 - فاكس: 4565222</span>
                        </li>
                        <li>
                            <span class="o_force_ltr">C.R. 1001076127 - P.O. Box 4630 Riyadh 11412 - Tel. 4566883 - Fax 4565222</span>
                        </li>
                        <li t-if="company.email">
                            <span class="o_force_ltr" t-field="company.email"/>
                        </li>
                    </ul>
                    <div t-if="report_type == 'pdf'" class="text-muted">
                        <div class="row">
                            <div class="col-6 text-right">Page/صفحة:</div>
                            <div class="col-6 text-left pl-0">
                                <span class="page"/> / <span class="topage"/>
                            </div>
                        </div>
                    </div>
                </div>
            </xpath>

            <!-- Header -->
            <xpath expr="//div[contains(@class,'header o_company_')]" position="replace">
                <div t-attf-class="header o_company_#{company.id}_layout" t-att-style="report_header_style">
                    <div class="row"
                         style="font-weight: bold;font-size: small;border-bottom: 1px solid black;direction: rtl;">
                        <div class="col-5 text-center" style="text-align:left;">
                            <h4 class="mt0" t-field="company.report_header" style="text-align:right;"/>
                            <div class="float-center mb4" style="text-align:right;">
                                <ul class="list-inline">
                                    <li class="ml-4 float-center mb4" style="font-size: large;white-space: nowrap">
                                        <span t-field="company.name"/>
                                    </li>
                                    <li class="ml-4 float-center"><span>ذات مسؤلية محدودة</span></li>
                                    <li class="ml-4 float-center"><span>رأس المال المدفوع (1200000) ريال سعودي</span></li>
                                    <li class="ml-4 float-center"><span>المركز الرئيسي الرياض - المملكة العربية السعودية</span></li>
                                    <li class="ml-4 float-center">الرقم الضريبي <span t-field="company.vat"/></li>
                                    <li class="ml-4 float-center">رقم سجل الشركة <span t-field="company.company_registry"/></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-2 ">
                            <img t-if="company.logo" t-att-src="image_data_uri(company.logo)"
                                 style="height: 130px;width: 200px;display: block;margin-left: -50px;"
                                 alt="Logo"/>
                        </div>
                        <div class="col-5  text-center" style="text-align:right;">
                            <h4 class="mt0" t-field="company.report_header" style="text-align:left;"/>
                            <div class="float-center mb4" style="text-align:left;">
                                <ul class="list-inline" style="text-align:left;">
                                    <li class="float-center mb4" style="font-size: large;white-space: nowrap;"><span t-field="company.foreign_name"/></li>
                                    <li class="float-center mb4"><span>Liability of Member Limited</span></li>
                                    <li class="float-center mb4"><span>Capital Paid (1200000) S.R</span></li>
                                    <li class="float-center mb4"><span>Head Office - Riyadh - Kingdom of Saudi Arabia</span></li>
                                    <li class="float-center mb4"><span t-if="company.partner_id.vat"><t t-esc="o.company_id.country_id.vat_label or 'Tax ID'"/>: <span t-field="company.partner_id.vat"/></span></li>
                                    <li class="float-center mb4"><span>CR No:</span> <span t-field="company.company_registry"/></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </xpath>
        </template>

        <!-- ======= Bank Info Template ======= -->
        <template id="bstt_account_invoice.dun_bank_info">
            <div style="page-break-inside: avoid; text-right">
                <div class="row">
                    <div class="col-8" style="text-align:left; font-weight: bold;white-space:nowrap ">
                        For TELEGRAPHIC TRANSFER (TT), please transfer to:
                    </div>
                    <div class="col-4" style="text-align:right; font-weight: bold;">الرجاء التحويل إالى </div>
                </div>
                <div class="row">
                    <div class="col-4 border" style="text-align:left;"> ACCOUNT NAME </div>
                    <div class="col-4 border" style="text-align:center;"><span t-field="o.partner_bank_id.acc_holder_name"/></div>
                    <div class="col-4 border" style="text-align:right;">اسم الحساب </div>
                </div>
                <div class="row">
                    <div class="col-4 border" style="text-align:left;">BANK NAME </div>
                    <div class="col-4 border" style="text-align:center;"><span t-field="o.partner_bank_id.bank_id.name"/></div>
                    <div class="col-4 border" style="text-align:right;">اسم  البنك  </div>
                </div>
                <div class="row">
                    <div class="col-4 border" style="text-align:left;">A/C NO </div>
                    <div class="col-4 border" style="text-align:center;"><span t-field="o.partner_bank_id.acc_number"/></div>
                    <div class="col-4 border" style="text-align:right;"> رقم الحساب الريال السعودي </div>
                </div>
                <div class="row">
                    <div class="col-4 border" style="text-align:left;">IBAN # </div>
                    <div class="col-4 border" style="text-align:center;"><span t-esc="o.partner_bank_id.bank_bic"/></div>
                    <div class="col-4 border" style="text-align:right;">الريال السعودي أيبان </div>
                </div>
                <div class="row">
                    <div class="col-4 border" style="text-align:left;">Swift Code </div>
                    <div class="col-4 border" style="text-align:center;"><span t-esc="o.partner_bank_id.swift_code"/></div>
                    <div class="col-4 border" style="text-align:right;">سويفت كود </div>
                </div>
            </div>
        </template>

        <!-- ======= Arabic English Invoice ======= -->
        <template id="arabic_english_invoice" inherit_id="l10n_gcc_invoice.arabic_english_invoice">
            <!-- Font & direction -->
            <xpath expr="//t[@t-call='web.external_layout']" position="attributes">
                <attribute name="style">font-size: small;direction: rtl;</attribute>
            </xpath>

            <!-- Invoice Table -->
            <xpath expr="//table[@name='invoice_line_table']" position="replace">
                <table class="border table table-sm o_main_table" style="margin-top: 5px;direction: rtl;" name="invoice_line_table">
                    <thead>
                        <tr>
                            <th class="border text-right">Description<br/>الوصف</th>
                            <th t-if="o.env.user.has_group('bstt_account_invoice.group_show_product_code')" class="border text-left">Code<br/>الكود</th>
                            <th class="border text-right">Quantity<br/>الكمية</th>
                            <th class="border text-right">Unit price<br/>سعر الوحدة</th>
                            <th t-if="display_discount" class="border text-right">Disc.%<br/>خصم %</th>
                            <th class="border text-right">Taxes<br/>الضرائب</th>
                            <th class="border text-right">Amount<br/>مبلغ</th>
                            <th class="border text-right">VAT Amount<br/>قيمة الضريبة</th>
                            <th class="border text-right">Total Price<br/>السعر الاجمالي</th>
                        </tr>
                    </thead>
                    <tbody class="invoice_tbody">
                        <t t-foreach="o.invoice_line_ids" t-as="line">
                            <tr class="border">
                                <td class="border text-right"><span t-field="line.product_id.name"/><br/><span t-field="line.with_context(lang='ar_001').product_id.name"/></td>
                                <td t-if="o.env.user.has_group('bstt_account_invoice.group_show_product_code')" class="border text-left"><span t-field="line.product_id.default_code"/></td>
                                <td class="border text-right"><span t-field="line.quantity"/> <span t-field="line.product_uom_id"/></td>
                                <td class="border text-right"><span t-field="line.price_unit"/></td>
                                <td t-if="display_discount" class="border text-right"><span t-field="line.discount"/></td>
                                <td class="border text-right"><span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))"/></td>
                                <td class="border text-right"><span t-field="line.price_subtotal"/></td>
                                <td class="border text-right"><span t-field="line.l10n_gcc_invoice_tax_amount"/></td>
                                <td class="border text-right" style="background: #D3D8D7"><span t-field="line.price_total"/></td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </xpath>

            <!-- Bank Info -->
            <xpath expr="//p[@name='payment_communication']" position="after">
                <t t-call="bstt_account_invoice.dun_bank_info"/>
            </xpath>
        </template>
    </data>
</odoo>
